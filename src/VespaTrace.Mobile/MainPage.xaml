<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="VespaTrace.Mobile.MainPage"
             Title="VespaTrace"
             BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#1E1E1E}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackLayout Grid.Row="0" BackgroundColor="{AppThemeBinding Light=#2E7D32, Dark=#1B5E20}" 
                     Padding="20,10" Orientation="Horizontal">
            <Label Text="🐝" FontSize="24" VerticalOptions="Center" />
            <Label Text="VespaTrace" 
                   FontSize="20" 
                   FontAttributes="Bold" 
                   TextColor="White" 
                   VerticalOptions="Center" />
            <Label x:Name="StatusLabel" 
                   Text="Ready" 
                   FontSize="14" 
                   TextColor="#E8F5E8" 
                   HorizontalOptions="EndAndExpand" 
                   VerticalOptions="Center" />
        </StackLayout>

        <!-- Main Content -->
        <ScrollView Grid.Row="1" Padding="20">
            <StackLayout Spacing="20">
                
                <!-- Quick Action Card -->
                <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#2D2D2D}" 
                       HasShadow="True" 
                       CornerRadius="12" 
                       Padding="20">
                    <StackLayout>
                        <Label Text="⚡ Quick Actions" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               Margin="0,0,0,15" />
                        
                        <Button x:Name="CameraBtn"
                                Text="📸 Identify Hornet"
                                BackgroundColor="#FF6B35"
                                TextColor="White"
                                FontAttributes="Bold"
                                CornerRadius="8"
                                HeightRequest="50"
                                Clicked="OnCameraClicked" />
                        
                        <Button x:Name="ReportBtn"
                                Text="📍 Report Sighting"
                                BackgroundColor="#4CAF50"
                                TextColor="White"
                                FontAttributes="Bold"
                                CornerRadius="8"
                                HeightRequest="50"
                                Margin="0,10,0,0"
                                Clicked="OnReportClicked" />
                    </StackLayout>
                </Frame>

                <!-- Recent Activity Card -->
                <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#2D2D2D}" 
                       HasShadow="True" 
                       CornerRadius="12" 
                       Padding="20">
                    <StackLayout>
                        <Label Text="📊 Recent Activity" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               Margin="0,0,0,15" />
                        
                        <CollectionView x:Name="RecentSightingsView" 
                                        HeightRequest="200"
                                        BackgroundColor="Transparent">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                    <Grid Padding="10,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto" />
                                            <ColumnDefinition Width="*" />
                                            <ColumnDefinition Width="Auto" />
                                        </Grid.ColumnDefinitions>
                                        
                                        <Label Grid.Column="0" 
                                               Text="{Binding RiskIcon}" 
                                               FontSize="20" 
                                               VerticalOptions="Center" />
                                        
                                        <StackLayout Grid.Column="1" Margin="10,0">
                                            <Label Text="{Binding Species}" 
                                                   FontAttributes="Bold" />
                                            <Label Text="{Binding TimeAgo}" 
                                                   FontSize="12" 
                                                   TextColor="Gray" />
                                        </StackLayout>
                                        
                                        <Label Grid.Column="2" 
                                               Text="{Binding Distance}" 
                                               FontSize="12" 
                                               TextColor="Gray" 
                                               VerticalOptions="Center" />
                                    </Grid>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </StackLayout>
                </Frame>

                <!-- Statistics Card -->
                <Frame BackgroundColor="{AppThemeBinding Light=White, Dark=#2D2D2D}" 
                       HasShadow="True" 
                       CornerRadius="12" 
                       Padding="20">
                    <StackLayout>
                        <Label Text="📈 Community Stats" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               Margin="0,0,0,15" />
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            
                            <StackLayout Grid.Column="0" Grid.Row="0" HorizontalOptions="Center">
                                <Label x:Name="TotalSightingsLabel" 
                                       Text="0" 
                                       FontSize="24" 
                                       FontAttributes="Bold" 
                                       TextColor="#FF6B35"
                                       HorizontalOptions="Center" />
                                <Label Text="Total Sightings" 
                                       FontSize="12" 
                                       TextColor="Gray"
                                       HorizontalOptions="Center" />
                            </StackLayout>
                            
                            <StackLayout Grid.Column="1" Grid.Row="0" HorizontalOptions="Center">
                                <Label x:Name="NestsEliminatedLabel" 
                                       Text="0" 
                                       FontSize="24" 
                                       FontAttributes="Bold" 
                                       TextColor="#4CAF50"
                                       HorizontalOptions="Center" />
                                <Label Text="Nests Eliminated" 
                                       FontSize="12" 
                                       TextColor="Gray"
                                       HorizontalOptions="Center" />
                            </StackLayout>
                            
                            <StackLayout Grid.Column="0" Grid.Row="1" Grid.ColumnSpan="2" 
                                         HorizontalOptions="Center" 
                                         Margin="0,15,0,0">
                                <Label x:Name="ApiariesProtectedLabel" 
                                       Text="0" 
                                       FontSize="24" 
                                       FontAttributes="Bold" 
                                       TextColor="#2196F3"
                                       HorizontalOptions="Center" />
                                <Label Text="Apiaries Protected" 
                                       FontSize="12" 
                                       TextColor="Gray"
                                       HorizontalOptions="Center" />
                            </StackLayout>
                        </Grid>
                    </StackLayout>
                </Frame>

            </StackLayout>
        </ScrollView>

        <!-- Bottom Navigation -->
        <Grid Grid.Row="2" BackgroundColor="{AppThemeBinding Light=White, Dark=#2D2D2D}" 
              Padding="10,5">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>
            
            <Button Grid.Column="0" 
                    Text="🏠&#10;Home"
                    FontSize="10"
                    BackgroundColor="Transparent"
                    TextColor="{AppThemeBinding Light=#2E7D32, Dark=#81C784}"
                    Clicked="OnHomeClicked" />
            
            <Button Grid.Column="1" 
                    Text="🗺️&#10;Map"
                    FontSize="10"
                    BackgroundColor="Transparent"
                    TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}"
                    Clicked="OnMapClicked" />
            
            <Button Grid.Column="2" 
                    Text="🐝&#10;Apiaries"
                    FontSize="10"
                    BackgroundColor="Transparent"
                    TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}"
                    Clicked="OnApiariesClicked" />
            
            <Button Grid.Column="3" 
                    Text="⚙️&#10;Settings"
                    FontSize="10"
                    BackgroundColor="Transparent"
                    TextColor="{AppThemeBinding Light=Gray, Dark=LightGray}"
                    Clicked="OnSettingsClicked" />
        </Grid>

    </Grid>

</ContentPage>
